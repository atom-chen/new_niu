{"version":3,"sources":["../../../../assets/Script/scene/clock.js"],"names":["cc","Class","extends","Component","properties","targetLab","Label","isCountdown","isFinishHide","isOpenAudio","time","onLoad","initialValue","alarmClockAudio","getComponent","AudioSource","start","onEnable","nowTime","string","onDisable","stop","update","dt","node","active","console","log","isPlaying","play"],"mappings":";;AAAA;;;AAGAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACAC,mBAAUL,GAAGM,KAFL;AAGR;AACAC,qBAAY,KAJJ;AAKR;AACAC,sBAAa,IANL;AAOR;AACAC,qBAAY,KARJ;AASR;AACAC,cAAK;AAVG,KAHP;;AAgBL;;AAEAC,UAlBK,oBAkBK;AACN;AACA,aAAKC,YAAL,GAAkB,KAAKF,IAAvB;AACA;AACA,aAAKG,eAAL,GAAqB,IAArB;AACA,YAAG,KAAKJ,WAAR,EAAoB;AAChB,iBAAKI,eAAL,GAAqB,KAAKC,YAAL,CAAkBd,GAAGe,WAArB,CAArB;AACH;AACJ,KA1BI;AA4BLC,SA5BK,mBA4BI,CAER,CA9BI;AAgCLC,YAhCK,sBAgCK;AACN,aAAKV,WAAL,GAAiB,IAAjB;AACA,aAAKW,OAAL,GAAa,CAAb;AACA,aAAKb,SAAL,CAAec,MAAf,GAAsB,KAAKT,IAA3B;AAEH,KArCI;AAuCLU,aAvCK,uBAuCM;AACP,aAAKV,IAAL,GAAU,KAAKE,YAAf;;AAEA,YAAG,KAAKH,WAAR,EAAoB;AAChB,iBAAKI,eAAL,CAAqBQ,IAArB;AACH;AACJ,KA7CI;AA+CLC,UA/CK,kBA+CGC,EA/CH,EA+CO;AACR,YAAG,KAAKhB,WAAL,IAAkB,IAArB,EAA0B;AACtB,iBAAKW,OAAL,IAAcK,EAAd;AACA,gBAAG,KAAKL,OAAL,IAAgB,CAAnB,EAAqB;AACjB,qBAAKR,IAAL,IAAW,CAAX;AACA,qBAAKQ,OAAL,GAAa,CAAb;AACA,qBAAKb,SAAL,CAAec,MAAf,GAAsB,KAAKT,IAA3B;AACH;AACD,gBAAG,KAAKA,IAAL,IAAW,CAAd,EAAgB;AACZ,qBAAKA,IAAL,GAAU,CAAV;AACA,qBAAKH,WAAL,IAAkB,KAAlB;AACA,oBAAG,KAAKC,YAAL,IAAmB,IAAtB,EAA2B;AACvB,yBAAKgB,IAAL,CAAUC,MAAV,GAAiB,KAAjB;AACAC,4BAAQC,GAAR,CAAa,KAAKH,IAAL,CAAUC,MAAvB;AACH;AACJ;;AAED;AACA,gBAAG,KAAKhB,WAAR,EAAoB;AAChB,oBAAG,KAAKC,IAAL,IAAW,CAAX,IAAgB,KAAKG,eAAL,CAAqBe,SAArB,IAAgC,KAAnD,EAAyD;AACrD,yBAAKf,eAAL,CAAqBgB,IAArB;AACH;AACJ;AAEJ;AAEJ;AAzEI,CAAT","file":"clock.js","sourcesContent":["/**\r\n * 闹钟类\r\n */\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        //目标文本\r\n        targetLab:cc.Label,\r\n        //是否开启倒计时\r\n        isCountdown:false,\r\n        //是否完成时隐藏\r\n        isFinishHide:true,\r\n        //是否开启声音功能\r\n        isOpenAudio:false,\r\n        //总时间\r\n        time:20,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        //time初始值\r\n        this.initialValue=this.time;\r\n        //闹钟音频组件\r\n        this.alarmClockAudio=null;\r\n        if(this.isOpenAudio){\r\n            this.alarmClockAudio=this.getComponent(cc.AudioSource);\r\n        }\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    onEnable(){\r\n        this.isCountdown=true;\r\n        this.nowTime=0;\r\n        this.targetLab.string=this.time;\r\n\r\n    },\r\n\r\n    onDisable(){\r\n        this.time=this.initialValue;\r\n\r\n        if(this.isOpenAudio){\r\n            this.alarmClockAudio.stop();\r\n        }\r\n    },\r\n\r\n    update (dt) {\r\n        if(this.isCountdown==true){\r\n            this.nowTime+=dt;\r\n            if(this.nowTime >= 1){\r\n                this.time-=1;\r\n                this.nowTime=0;\r\n                this.targetLab.string=this.time;\r\n            }\r\n            if(this.time<=0){\r\n                this.time=0;\r\n                this.isCountdown==false;\r\n                if(this.isFinishHide==true){\r\n                    this.node.active=false;\r\n                    console.log( this.node.active);\r\n                }\r\n            };\r\n\r\n            //播放音频\r\n            if(this.isOpenAudio){\r\n                if(this.time==5 && this.alarmClockAudio.isPlaying==false){\r\n                    this.alarmClockAudio.play();\r\n                };\r\n            }\r\n\r\n        };\r\n\r\n    },\r\n});\r\n"]}